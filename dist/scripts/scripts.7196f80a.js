"use strict";angular.module("owlLinksDashboardApp",["ui.router","toastr","ngProgress"]).config(["$httpProvider","$stateProvider","$urlRouterProvider",function(a,b,c){a.defaults.headers.common["api-key"]="4B5B8A4948F8AA4FF918A353B5CAE",c.otherwise("/home"),b.state("home",{url:"/home",templateUrl:"views/partials/home.html",data:{title:"Bem vindo"}}).state("collectlinks",{url:"/collectlinks",templateUrl:"views/partials/collectlinks.html",data:{title:"Coleção de Links"}}).state("newsletters",{url:"/newsletters",templateUrl:"views/partials/newsletters.html",data:{title:"Newsletters"}}).state("contacts",{url:"/contacts",templateUrl:"views/partials/contacts.html",data:{title:"Contatos"}}).state("links",{url:"/links",templateUrl:"views/partials/links.html",data:{title:"Links"}}).state("insert-link",{url:"/insert-link",templateUrl:"views/partials/insert-link.html",data:{title:"Inserir Link"}})}]).constant("API_URL","http://owl-links-api.herokuapp.com").constant("APP_VERSION","0.9.1").factory("Helpers",["$http",function(){return{isNotString:function(a){return"string"!=typeof a},label_color:function(a){var b=["primary","success","info","warning","danger"];return b[a%5]}}}]).run(["$rootScope","$state","Helpers",function(a,b,c){a.helpers=c,a.$state=b}]),angular.module("owlLinksDashboardApp").service("CollectLinksService",["$http","API_URL",function(a,b){this.getAllLinks=function(){return a.get("{0}/{1}".format(b,"collectlinks"))},this["delete"]=function(c){return a["delete"]("{0}/{1}/{2}".format(b,"collectlink",c))}}]),angular.module("owlLinksDashboardApp").service("NewslettersService",["$http","API_URL",function(a,b){this.getAll=function(){var c="{0}/{1}".format(b,"newsletters");return a.get(c)},this["delete"]=function(c){var d="{0}/{1}/{2}".format(b,"newsletter",c);return a["delete"](d)}}]),angular.module("owlLinksDashboardApp").service("ContactsService",["$http","API_URL",function(a,b){this.getAll=function(){var c="{0}/{1}".format(b,"contacts");return a.get(c)},this.getById=function(c){var d="{0}/{1}/{2}".format(b,"contact",c);return a.get(d)},this["delete"]=function(c){var d="{0}/{1}/{2}".format(b,"contact",c);return a["delete"](d)}}]),angular.module("owlLinksDashboardApp").service("LinksService",["$http","API_URL",function(a,b){this.getAllTags=function(){return a.get("{0}/{1}/{2}".format(b,"links","tags"))},this.getAll=function(){return a.get("{0}/{1}".format(b,"links"))},this.getById=function(c){return a.get("{0}/{1}/{2}".format(b,"links",c))},this["delete"]=function(c){var d="{0}/{1}/{2}".format(b,"link",c);return a["delete"](d)},this.update=function(c){var d="{0}/{1}/{2}".format(b,"link",c.id);return a.put(d,c)},this.insert=function(c){var d="{0}/{1}".format(b,"link");return a.post(d,c)}}]),angular.module("owlLinksDashboardApp").controller("CollectLinkCtrl",["$scope","CollectLinksService","toastr",function(a,b,c){a.links=null,a.loadLinks=function(){console.log("Carregando coleção de links..."),b.getAllLinks().success(function(b){a.links=b,console.log("Links carregados com sucesso")}).error(function(a){c.error("Falha ao carregar os links"),console.error(a)})},a.deleteLink=function(a){console.log("Excluindo link "+a.id),b["delete"](a.id).success(function(){c.success("Link excluído com sucesso"),a.hide=!0}).error(function(a){c.error("Falha ao excluir link"),console.error(a)})}}]),angular.module("owlLinksDashboardApp").controller("NewslettersController",["$scope","NewslettersService","toastr",function(a,b,c){a.newsletters=null,a.loadAll=function(){console.log("Carregando newsletters..."),b.getAll().success(function(b){a.newsletters=b,console.log("Newsletter carregadadas com sucesso")}).error(function(a){c.error("Falha ao carregar a newsletter"),console.error(a)})},a["delete"]=function(a){console.log("Excluindo newsletter "+a.id),b["delete"](a.id).success(function(){c.success("Newsletter excluída com sucesso."),a.hide=!0}).error(function(a){c.error("Falha ao excluir a newsletter"),console.error(a)})}}]),angular.module("owlLinksDashboardApp").controller("ContactsCtrl",["$scope","ContactsService","toastr",function(a,b,c){a.contacts=null,a.contact=null,a.loadContacts=function(){console.log("Carregando contatos..."),b.getAll().success(function(b){a.contacts=b,console.log("Contatos carregadadas com sucesso.")}).error(function(a){c.error("Falha ao carregar os contantos"),console.error(a)})},a.findById=function(d){console.log("Pesquisando contato "+d),b.getById(d).success(function(b){a.contact=b,console.log("Contato encontrado {0}".format(b.id))}).error(function(a){c.error("Falha ao pesquisar contanto"),console.error(a)})},a["delete"]=function(a){console.log("Excluindo contanto "+a.id),b["delete"](a.id).success(function(){c.success("Contanto excluído com sucesso"),a.hide=!0}).error(function(a){c.error("Falha ao excluir contanto"),console.error(a)})}}]),angular.module("owlLinksDashboardApp").controller("LinksController",["$scope","LinksService","toastr",function(a,b,c){a.links=null,a.link=null,a.tags=null,a.loadTags=function(){console.log("Carregando tags..."),b.getAllTags().success(function(b){a.tags=b,console.log("Tags carregadas com sucesso")}).error(function(a){c.error("Falha ao carregar a lista de tags"),console.error(a)})},a.loadAll=function(){console.log("Carregando links..."),b.getAll().success(function(b){a.links=b,console.log("Links carregadadas com sucesso")}).error(function(a){c.error("Falha ao carregar os links"),console.error(a)})},a.findById=function(d){return console.log("Consultando link {0}".format(d)),b.getById(d).success(function(b){a.link=b,console.log("Link encontrado {0} - {1}".format(b.id,b.url))}).error(function(a){c.error("Falha ao pesquiar link"),console.error(a)})},a["delete"]=function(a){console.log("Excluindo link {0}".format(a.id)),b["delete"](a.id).success(function(){c.success("Link excluído com sucesso"),a.hide=!0}).error(function(a){c.error("Falha ao excluir link"),console.error(a)})},a.save=function(a){console.log("Salvando link..."),a.notifynews="N",a.tags=a.tags.split(","),void 0===a.id?b.insert(a).success(function(){c.info("Link cadastrado com sucesso")}).error(function(a){c.error("Falha ao inserir link"),console.error(a)}):b.update(a).success(function(){c.info("Link atualizado com sucesso")}).error(function(){c.error("Falha ao autilizar link"),console.error(error)})}}]),angular.module("owlLinksDashboardApp").directive("tagsimput",function(){return{restrict:"A",link:function(){$("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()}}}),angular.module("owlLinksDashboardApp").directive("loading",["$http","ngProgress",function(a,b){return{restrict:"E",replace:!0,link:function(c){c.isLoading=function(){return a.pendingRequests.length>0},c.$watch(c.isLoading,function(a){a?(b.color("#C62828"),b.height("3px"),b.start()):b.complete()})}}}]);